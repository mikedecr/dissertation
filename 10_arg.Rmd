# Introduction: Policy Ideology and Congressional Primaries {#ch:arg}

<!-- outline 

What's the problem?

- quick intro to SPD
- empirical problem: we don't observe key constructs
- theoretical problem: we don't understand how accountability would be enforced?
- What will we do:
    - construct a new model-based measure of intra-party preferences
    - use it to test a voters-up mechanism for enforcement

The SPD, in detail

- longer articulation of theoretical problems

Limitations for inferring ideal points from votes

- longer articulation of empirical/measurement problem

Outline for the dissertation

- Theoretical orientation
- empirical orientation
- chapter outline

-->




<!------- TO DO ---------
- Chunk options pre script (I hate this actually)
    - maybe instead a meta-helper.R that helps knitr and graphics
- chapter-specific cache?
    - grab file name
    - remove extension
    - save as folder name
- are there issues with cache in multiple output formats?
------------------------->


```{r knitr-01-arg, include = FALSE, cache = FALSE}
source(here::here("assets-bookdown", "knitr-helpers.R"))

# knitr::opts_chunk$set(
#   cache.path = 
#     stringr::str_glue('{knitr::opts_chunk$get("cache.path")}01-arg/'),
#   fig.path = 
#     stringr::str_glue('{knitr::opts_chunk$get("fig.path")}01-arg/')
# )
```


```{r r-01-arg, cache = FALSE}
library("knitr")
library("here")
library("magrittr")
library("tidyverse")
library("latex2exp")
```




<!-- In chapter \@ref(ch:arg), we will... -->


<!-- Intro: PARTICIPATION. 
- most people don't write letters to members, agencies
- campaign for office
- donate money
-->


Elections are the foremost venue for citizens to influence government actors and public policy.
Classic theories of voting suggest that citizens weigh the policy positions of alternative candidates and vote for the candidate whose platform most closely aligns with their own preferences [@downs:1957:economic-theory].
Political parties simplify the voter's calculations by providing a powerful heuristic in the form of the party label, enabling voters to infer candidates' values and issue positions without expending the effort to thoroughly appraise each campaign [@campbell-et-al:1960:american-voter; @green-et-al:2002:partisan-hearts; @rahn:1993:stereotypes].

The rise of partisan polarization, however, has complicated the role of parties in U.S.\ politics.
Although citizens, journalists, pundits, and even elected leaders frequently bemoan the bitter rhetoric and legislative gridlock that has accompanied the widening partisan divide, political scientists have noted several positive consequences to polarization.
Compared to the parties of the early- and mid-1900s that political scientists believed were too similar to provide voters with meaningful choices [@apsa:1950:party-system], the Democratic and Republican Parties of recent decades have taken divergent and oppositional stances across a greater number of policy issues.
As a result, voters can more easily differentiate the policy platforms of the two parties in order to vote consistently with their political values.
Voters in turn became more thoroughly sorted into partisan groups that represent distinct ideological viewpoints in American politics, holds beliefs across multiple issues that are more ideologically consistent, think more abstractly about the ideological underpinnings of issue stances, and participate more in politics than they did in the past [@abramowitz:1998:realignment; @layman-carsey:2002:conflict-extension; @fiorina:2005:culture; @levendusky:2009:partisan].

Even as polarization has strengthened many aspects of political representation between the two parties, it may have troubling effects on representation within the two major parties.
The typical voter is a partisan who intends to cast her ballot for her preferred party, whoever that candidate may be [@bartels:2000:partisanship; @petrocik:2009:leaners]. As party-line voting increases, voters are more thoroughly captured by their loyalties.
A partisan voter's choices are locked in long before Election Day.
Candidates from her preferred party have already been selected through a nomination process, and she may be more likely to abstain from voting when faced with an undesirable candidate than she is to vote for a different party [@hall-thompson:2018:who-punishes].
Recent research supports this notion of capture amid polarization---when voters must choose between polarized candidates, they become less responsive to candidates' actual platforms and instead are more influenced by motivated reasoning and partisan teamsmanship [@Rogowski:2016:polarized-choices].
Voters relax their substantive scrutiny of candidates to cast low-cost votes for their own party, weakening the influence of _policy_ as a separate consideration from partisanship.
<!------- TO DO ---------
- More forgiving of bad traits? 
  (we don't care about traits, we care about policy)
------------------------->

This presents an important problem for our understanding of how elections contribute to the representation of voter preferences in government.
Elections are intended to be a voter's choice over alternative political values to be expressed in government, but if the choice of candidates does not present the average partisan voter with realistic alternatives, how should we think about the "representation" of these voters' actual policy preferences?
If general elections provide an ever-coarsening choice over policy priorities, does the U.S.\ electoral system incorporate voters policy preferences in other ways?

When the choice before voters in the general election does not present realistic alternatives, political scientists naturally shift their focus to the nomination of partisan candidates.
V.O.\ Key, for example, studied Democratic Party dominance in the American South, asking if competition within the party could provide a quality of representation similar to two-party competition [@Key:1949:southern-politics]. 
Although scholars are right to examine within-party competition, focusing on contexts of single-party dominance is a serious limitation.
Even in races between viable candidates from both major parties, within-party competition plays a crucial role simply due to the fact that partisan voters almost certainly cast a vote for their own party.
Rank-and-file partisan constituents are all but captured---if they are to express their policy preferences through the act of voting, their voices may register as relatively weak because they present little electoral risk to their party in the general election.
The nomination stage---the primary election in particular---remains an important venue for the representation of partisans' policy views, whether the general election is closely contested or not.


## Policy Preferences and the Study of Primaries

This dissertation is chiefly concerned with the policy preferences of partisan voters and their role in electoral representation through primary politics.
The study of American electoral politics has not ignored the representational function of primary elections [@geer:1988:primary-electorates; @norrander:1989:primary-voters; @cohen-et-al:2009:party-decides; @aldrich:2011:why-parties], but as I discuss below, the quantifiable impact of primary voters' policy preferences in government is a startlingly open question. 
<!------- TO DO ---------
- punch up or just preview? 
------------------------->
Several existing studies have examined other aspects of primary representation, such as the introduction of the direct primary [@ansolabehere-et-al:2010:direct-primary], how candidates position themselves in response to the presence or threat of primary challenges 
[@burden:2004:candidate-positioning; @brady-han-pope:2007:out-of-step; @hirano-et-al:2010:primary-polarization], and how primary nomination rules affect elite polarization [@hirano-et-al:2010:primary-polarization; @mcghee-et-al:2014:nomination-systems; @rogowski-langella:2015:primary-systems].
Though these studies address interesting aspects of electoral representation and party competition, they cannot speak directly to the influence of voter's policy preferences on (1) the positioning of candidates and (2) the outcomes of primary elections.

The absence of voter preferences from the empirical study of primaries is troubling because they play a crucial role in the dominant theory that relates representation to primary politics. 
Although the Downsian model of candidate positioning explains the incentives for candidates to stake out moderate policy positions to cater to the ideological "median voter" [@downs:1957:economic-theory], candidates behave differently in the real world. 
Instead, candidates engage in highly partisan behavior and take divergent issue stances even on salient local issues and in closely competitive districts [@ansolabehere-et-al:2001:candidate-positioning; @fowler-hall:2016:convergence].
But why?
Scholars and political observers have argued that because competing in the general election requires each candidate to clinch their party's nomination contest, these candidates face a combination of convergence-promoting and divergence-promoting incentives.
Primary elections tend to be dominated by partisan voters who are attentive to politics and hold stronger, non-centrist issue preferences compared to the average general-election voter.^[
  Primary elections are not *entirely* partisan affairs.
  States vary in their regulations that primaries be "closed" to partisan voters only, that voters must preregister with their preferred party to vote in the primary, and even whether primaries are partisan at all [see @mcghee-et-al:2014:nomination-systems for a thorough and contemporary review of these regulations].
  Although many observers suspect that regulations on primary openness greatly influence the ideological extremity of the primary electorate, recent survey research finds that these regulations do little to affect the policy preferences of primary voters on average [@hill:2015:nominating-institution].
]
<!------- TO DO ---------
- Institution of nomination in a separate section?
------------------------->
As a result, competition in the primary stage may present a more acute electoral threat to partisan candidates than general elections do---a "strategic-positioning dilemma" that leads candidates to take ideological issue stances in favor of convergent stances that target the median voter [@aldrich:1983:downsian-activism; @burden:2004:candidate-positioning; @brady-han-pope:2007:out-of-step; @hill:2015:nominating-institution].
The strategic positioning dilemma (SPD) is a central theoretical feature of this project, and tests of the SPD are key empirical contributions in the following chapters.
<!------- TO DO ---------
- considered cites in comment
------------------------->
<!-- \citep{aldrich1983downsian,burden2004candidate,brady2007primary,aldrich2011parties,jacobson2015politics,hill2015institution}. -->


### Key terms: policy ideology

If we had an ideal test of the SPD's implications, the policy preferences of partisan primary voters are an essential ingredient.
Primary voters are one of the key constituencies that a candidate must please in the SPD view of primary elections.
When partisan voters in a district are more conservative, the SPD claims that the candidate experiences a pressure to stake out a more conservative campaign position, especially in the primary. 
This section briefly discusses this project's terminology around voter ideology, the groups in the electorate for whom these concepts are at play, and how relate to other political science research.

When this project discusses voter "preferences" or voter "ideology," it specifically refers to a notion of _policy ideology_.
An individual's policy ideology is a summary of their policy views in a left–right ideological space.
Policy views are naturally complex and multidimensional, and it is possible for individuals to hold beliefs across policy areas that would strike many political scientists as being "ideologically inconsistent" [e.g. @campbell-et-al:1960:american-voter].
Policy ideology distills this complexity into average tendencies; voters who hold a greater number of progressive preferences about policy are more ideologically progressive, and vice versa for voters with more conservative policy preferences.
Voters who hold a mixture of progressive and conservative beliefs are ideologically moderate.

Policy ideology is different from policy _mood_, since mood measures voter preferences for the government to do more or less than an ever-shifting baseline, while ideology meant to be directly comparable using only issue information [@stimson:1991:moods; @enns-koch:2013:state-mood; @mcgann:2014:irt-mood].
Policy ideology is thus a similar concept to any method that measures a hidden ideological summary from one-off issue-based stimuli.
This includes ideal point scores for members of Congress, Supreme Court justices, and even individual citizens [@poole:1997:roll-call-history;@martin-quinn:2002:ideal;@clinton-jackman-rivers:2004:ideal;@treier-hillygus:2009:ideology; @tausanovitch-warshaw:2013:constituent-prefs].
Other researchers have called this concept "policy liberalism" [@caughey-warshaw:2015:DGIRT], which orients the concept so that "larger" values represent "more liberalism." 
For this project, I prefer to orient the construct as policy _conservatism_, which orients a scale so that larger/more conservative values correspond to "rightward" movements on a number line.
I try to be conscious of the difference between _consistent_ issue beliefs and _extreme_ issue beliefs throughout this project.
Consistently conservative issue beliefs do not necessarily imply that an actor is "extremely" conservative [@fiorina-et-al:2005:culture-war], and an actor may appear "moderate" even if they hold a mixture of non-moderate progressive and conservative issue beliefs [@broockman:2016:policy-representation]. 

This project views policy liberalism in a measurement modeling context, which we return to in Chapter \@ref(ch:model).
Policy liberalism affects voters' issue beliefs, and while issue beliefs can be measured using a survey, policy liberalism itself cannot be.
Instead, policy liberalism exists in a latent space, and survey items on specific issues reveal only limited information about voters' locations in the latent space.
This is different from constructing ideology as a simple average of policy beliefs using additive issue scales.
Although the additive scaling approach is common, it implies an assumption that all items about all issues are equally informative about ideology. 
Modern measurement approaches doubt this assumption, instead viewing survey items as sources of correlated measurement error across respondents, leading to more careful modeling approaches for estimating a latent signal from noisy survey data [@ansolabehere-et-al:2008:voter-ideology].
Following this modeling tradition, I refer to an individual's location in policy-ideological space as their "ideal point," the point at which their expected utility of a policy is maximized with respect to their ideological similarity.

### Key terms: district-party groups

I argue that another key construct at work in the SPD is the notion of _groups_ in the electorate.
For a given district, the general election is a contest among all voters, so we consider this constituency as a group. 
We sometimes refer to this group as the "general election constituency," since it contains anybody who is eligible to vote in the general election.
It does not specifically refer to voters only, but contains any citizen who could potentially be a voter in the general election.
This ambiguity of who among the general election constituency actually votes is important to understanding a candidate's incentives during the campaign, since the candidate is uncertain whether certain campaign tactics will galvanize some constituents while alienating others.

Another important grouping for this the partisan constituency within a district. 
Each congressional district contains constituents who are aligned with the Democratic Party and the Republican Parties.
I call these two groups of constituents _district-party groups_. 
All $435$ congressional district contains voters from the two major parties, totaling `r 435 * 2` district-party groups.
For brevity, I sometimes refer to district-party groups as "party groups" or "partisan groups."
A district-party group contains any voting-eligible citizen who resides in a given district and identifies with a given party.
As with the general election constituency, membership in a party group is no guarantee that the constituent votes either in the primary or in the general election.
The important fact is that they are nominally aligned with one party's voter base over the other.
<!------- TO DO ---------
- justify ambiguity
------------------------->
As I discuss below, decomposing a district's voters into separate party groups is the key theoretical innovation in this project.
To the best of my knowledge, an empirical study that decomposes the district electorate in this way has never been done, even though it is crucial for testing the implications of the SPD theory.

One important distinction about district-party groups is that they are made of constituents, not organizations.
For this reason, it is sometimes helpful to refer to district-party groups as district party "publics," which emphasizes that the groups are composed of ordinary citizens.
There is no formal registration requirement to be a member of a party group, only a partisan identification.
This construction of district-party publics aligns most closely with Key's "party in the electorate" rather than "party as organization" [@key:1955:politics-parties-groups].
This distinguishes party publics from interest groups, policy groups, "intense policy demanders," or the "extended party network," which are concepts that describe organizations or maneuvers by political elites rather than rank-and-file constituents [@cohen-et-al:2009:party-decides; @koger-et-al:2009-partisan-webs; @masket:2009:no-middle-ground].
Although recent research has underscored the importance of elite actors in shaping party nominations, this project focuses specifically on testing the SPD, which is a voter-centric view of primary representation.
We bring in important concepts from elite-driven stories of primaries as they apply to particular claims being tested in later chapters.
<!------- TO DO ---------
- dan schlozman
- Klar networks?
- ruth bloch rubin?
------------------------->




### Party-Group Ideology, Candidate Positioning, and Primary Choice



First, the theory predicts that candidates strategically position themselves to appeal to primary voters.
That is, if we could construct an ideological summary of the partisan primary voters in a district, we ought to find that the level of voter conservatism affects the conservatism of the primary candidates' campaign stances. And second, if primary voters present a credible threat to primary candidates (specifically via their policy preferences), they should vote for the candidate who best represents their policy views. We should observe that as the degree of primary voter conservatism increases, the probability that a more conservative candidate is nominated increases as well. These two predictions are the core empirical implications of the "strategic positioning dilemma" theory of representation in primaries, and they each require researchers to know the preferences of partisan voters within an electoral district. Yet, the preferences of the partisan constituency are either absent or dangerously misconstrued in the existing literature, and we have been unable to answer these key questions as a result.

Stated differently, this dissertation asks if primaries "work" the way we think they do. It is widely believed that primaries are effective means for voters to inject their sincere preferences into the selection of candidates and, in turn, the priorities of elected officials. Is this *actually* true? Do candidates position themselves to win the favor of primary voters? Do primary voters select the candidate who best represents their issue beliefs? And further, do institutional factors that purportedly alter the positioning incentives of candidates, such as redistricting, affect which candidates are nominated?

Not only is the evidence in support of this theory sparse or indirect,^[
  I elaborate on the existing evidence later in this chapter.
]
its theoretical plausibility is not straightforward either. Primary elections present voters with uniquely high informational demands. Because most primary elections are held between candidates of the same party,^[
  There are a few exceptions to this general characterization of nomination elections. California, Louisiana, and Washington hold blanket primaries, sometimes called "jungle" primaries, where candidates from all parties compete on one ballot to be included in a runoff general election.
]
the party label does not provide the same heuristic cue for voters to impute the positions of the candidates. Although primary voters are generally informed about the typical policy positions associated with their preferred party [@hill:2015:nominating-institution], the costs of learning about which candidate stands for which position will be higher than the information costs in a general election. Primary elections typically occur in odd months when voters are paying less attention to politics, and the press typically cover primary campaigns less closely than general election campaigns. In these low-information environments, voters may decide to cast their ballot for various non-policy reasons. They may vote for the familiar candidate instead of the ideologically proximate one, in which case asymmetric campaign expenditures or news coverage may advantage one candidate over the other. Candidates may determine that communicating their policy positions is less cost-effective than communicating symbolic positions by touting their incumbency or their "outsider" status. The efficacy of these appeals may be correlated with the actual ideological positions of the candidates (for example, if high-quality incumbents are more skilled at perceiving primary voter preferences,[
  On the perception of voter preferences by politicians, see @broockman-skovron:2018:bias.
]
positioning themselves in relation to primary voters, and at communicating symbolically powerful messages), but the information voters are acting on is itself non-spatial. In short, although the proposition that voters' policy preferences affect their primary candidate choices seems straightforward, the informational environment of the primary campaign presents voters with many incentives to vote using non-policy considerations. Indeed, the notion that "voters matter" is a theoretical orientation toward primaries that is not shared by all scholars of electoral representation. Many scholars of political parties maintain that parties retained their gatekeeping roles over party nominations even as the direct primary ostensibly removed their formal powers over candidate selection. Although primary campaigns take place, these scholars argue that an informal network of party actors wields enormous influence behind the scenes, controlling which candidates obtain access to the party's resources, donor lists, and partisan campaign labor [@cohen-et-al:2009:party-decides; @masket:2009:no-middle-ground].

There are two dominant obstacles that have kept the primary constituency from assuming its proper role in the the study of representation. First, and most importantly, the dominant conceptualization and operationalization of constituency preferences is unsuited the study of partisan primaries. Our working theory of primary representation, particularly as it relates to the "strategic positioning dilemma," pits two constituencies within the district against each other: the nominating constituency, which contains only nominating voters from one party, and the general election constituency, which is composed of citizens from both major parties as well as Independents. The former is theorized to prefer ideologically faithful candidates who adhere closely to the party's policy platform,^[
  Strategic voting complicates this characterization, which I discuss below.
]
while the latter prefers moderate candidates in the general election. Studies routinely acknowledge this distinction in theory, but they often abandon the distinction between the two groups applied studies, instead operationalizing the preferences of all three constituencies---the general constituency and two partisan primary constituencies---using the same single and inappropriate measure: the district-level presidential vote. The presidential vote share is not suitable for the study of primary representation for the simple reason that votes are not equivalent to policy preferences or political ideology. (I refer to "ideology" in its meaning as a summary measure of an individual's issue preferences---i.e. an "ideal point"---rather than its meaning as an abstract political value set from which policy positions can be derived.)
<!------- TO DO ---------
- section about the use of the term "ideology?"
------------------------->
Republican voters in a district may be ideological moderates or ideological conservatives, but the fact that they all vote Republican does not inform us on their relative ideological tastes. Similarly, a district's vote outcome captures how its constituents vote on average, but because partisans tend to vote foremost for their preferred party, this average may be more strongly affected by number of voters in each party rather than their ideological preferences.
<!------- TO DO ---------
- simulation
------------------------->
<!-- create a simulation where...
  - district vote changes with number of partisans, even though ideal pts never change
  - equivalent vote outcomes for a distribution of primary ideologies
-->
The district presidential vote fails to represent primary constituent preferences both as a concept and as a feasible proxy measure, and the U.S. representation literature's reliance on this measure for decades potentially compromises its understandings of accountability under democratized party nominations. Because we have not studied primary constituency preferences, we cannot characterize their impact in electoral representation.

The second obstacle preventing a more complete study of primary representation is the failure to incorporate primary candidates' ideal points into the analysis. Although ideal point estimates derived from roll-call votes such as [Nominate]{.smallcaps} are a popular tool for measuring politicians' ideological locations [@poole:1997:roll-call-history; @poole:2005:spatial-models], only incumbents cast roll call votes, so these measures are unavailable for non-incumbent candidates.^[
  Studies of candidate positioning that go beyond incumbents sometimes use survey data from challenger candidates [@ansolabehere-et-al:2001:candidate-positioning; @burden:2004:candidate-positioning], but the surveys only interview general election candidates. Furthermore, the rarity of these surveys limits the generalizability of their findings over time.
]
Further, when non-incumbents enter the picture, researchers tend to focus on the positioning of general election candidates rather than primary candidates [@ansolabehere-et-al:2001:candidate-positioning; @canes-wrone-et-al:2002:out-of-step; @burden:2004:candidate-positioning]. Some studies have argued that primary competition leads incumbent legislators to take non-median positions, but these studies do not observe primary candidate positions directly, instead observing the presence or threat of challengers [@burden:2004:candidate-positioning; @brady-han-pope:2007:out-of-step]. Recent advances in ideal point modeling using campaign contributions are a promising path forward [@hall-snyder:2015:ideology; @bonica:2013:ideology-interests; @bonica:2014:mapping-ideology], but they are not designed for the careful study of primary competition and thus contain many "post-treatment" measurement artifacts.
<!------- TO DO ---------
- weaken
------------------------->
<!-- don't diss Bonica if we're going to use him! -->

It must be stressed that these obstacles are not merely methodological, since the theoretical consequences are enormous. The literature's dependence on the presidential vote as a proxy for district preferences and its omission of primary candidate ideology have prevented scholars from testing basic theoretical propositions in the study of primary politics. Put simply, without serviceable measures of local partisan preferences or primary candidate positions, we can say very little about the role of primary elections in the broader democratic order of U.S. politics. This affects our knowledges of topics beyond nominations as well. To study how politicians weigh the opinions of their party's base of support against other voters in their districts, we must be able to measure the preferences of a politician's local partisan constituency.^[
   @clinton:2006:constituent-representation provides suggestive evidence on the importance of this distinction. Using a cross-sectional survey, he finds that the roll-call voting behavior of Democratic members of Congress is more responsive to the district's median constituent, while Republican members respond more strongly to the average Republican constituent.
]
As scholars explore whose voices truly matter in shaping party platforms and policy [@cohen-et-al:2009:party-decides; @bartels:2009:unequal-democracy; @gilens:2012:affluence; @lax-phillips:2012:democratic-deficit; @grossman-hopkins:2016:asymmetric-politics], these researchers will benefit enormously from an approach to estimate the subnational preferences of partisan voters. This dissertation will demonstrate the added value of conceptualizing voter preferences in this way.^[
  New work by @caughey-et-al:2018:ideological-nationalization operationalizes the average ideal points of partisans within states. I offer important extensions on their modeling approach and apply the estimates to very different substantive questions.
]

I fill this gap in the representation literature by developing a new measurement model for local partisan preferences and applying these estimates to important questions of primary representation. The model builds on the work of @tausanovitch-warshaw:2013:constituent-prefs and @caughey-warshaw:2015:DGIRT, estimating a latent index of policy liberalism within partisan groups in Congressional districts. For each district, the model estimates the mean ideal point of Democratic and Republican constituents using survey data. With these new estimates, I directly test the hypotheses that other studies have fallen short of testing. Is it truly the case that the primary constituency is a standout cause of candidate positioning? Do primary voters nominate partisan candidates for their ideological "fit"? And do institutional configurations such as gerrymandering distort these relationships in ways commonly suggested by scholars and political observers alike?

This remainder of this chapter reviews leading theoretical approaches to primary representation, highlights the importance of partisan constituent preferences, and uses formal models to demonstrate how existing approaches fail to measure the important theoretical constructs. The chapter ends by previewing the remaining chapters of the dissertation about the new measurement model (Chapter \@ref(ch:model)) and analyses that apply the new estimates to important areas of primary representation: the strategic positioning of primary candidates (\@ref(ch:positioning)) and the vote choices of primary constituents (\@ref(ch:voting)).
<!-- , and how redistricting moderates these outcomes of interest (\@ref(ch:redistricting)). -->



<!-- 
pro:

- responsiveness evidence


con: 

- information constraints
- party over policy
- Warshaw spatial voting (US House) (but also...maybe primary electorates are better)

-->


## Limitations for inferring ideal points from votes


```{r read-cces}
cces_raw <- read_rds(here("data", "cces", "cumulative_2006_2018.Rds"))
```

```{r read-dime}
# Bonica scores and other candidate features
dime_cong_raw <- 
  read_csv(
    here("data", "dime-v3", "cong", "dime_v3_cong_elections.csv")
  ) %>%
  print()
```


```{r}
cces <- cces_raw %>%
  mutate_all(labelled::remove_labels) %>%
  mutate(
    ideo5_ch = as.character(ideo5),
    ideo5 = as.numeric(ideo5),
    party = case_when(
      pid3 == 1 ~ "Democrat",
      pid3 == 2 ~ "Republican",
      pid3 == 3 ~ "Independent",
      TRUE ~ "Other/DK/NA"
    )
  ) %>%
  select(
    cycle = year, state_abb = st, st_cd = cd, district_num = dist, 
    weight, party, ideo5, ideo5_ch
  ) %>%
  filter(ideo5 %in% 1:5) %>%
  na.omit() %>%
  print()
```

```{r clean-dime}
dime <- dime_cong_raw %>%
  transmute(
    cycle, state_abb = state, district, seat,
    district_num = parse_number(district),
    district_pres_vs = 1 - dem_pres_vs
  ) %>%
  filter(
    seat == "federal:house"
  ) %>%
  na.omit() %>%
  distinct() %>%
  print()



# dime <- dime_all_raw %>%
#   mutate(
#     cycle = parse_number(cycle),
#     fecyear = parse_number(fecyear),
#     district_num = parse_number(district),
#     party = 
#       case_when(
#         party == 100 ~ 1,
#         party == 200 ~ 2
#       ),
#     district.pres.vs = 1 - district.pres.vs
#   ) %>%
#   rename_all(str_replace_all, "[.]", "_") %>%
#   filter(
#     seat == "federal:house",
#     state %in% state.abb,
#     fecyear == cycle,
#     fecyear %in% cces$cycle,
#   ) %>%
#   select(
#     state_abb = state, 
#     district_num, 
#     cycle, 
#     # party, 
#     district_pres_vs
#   ) %>%
#   na.omit() %>%
#   distinct() %>%
#   print()
```

```{r}
dime %>%
  group_by(cycle) %>%
  count()
```



```{r mean-ideology}
ideo_all <- cces %>%
  group_by(cycle, state_abb, st_cd, district_num) %>%
  summarize(
    mean_ideo = weighted.mean(x = ideo5, w = weight)
  ) %>%
  mutate(party = "All") %>%
  ungroup() %>%
  print()

ideo_party <- cces %>%
  group_by(cycle, state_abb, st_cd, district_num, party) %>%
  summarize(
    mean_ideo = weighted.mean(x = ideo5, w = weight)
  ) %>%
  ungroup() %>%
  print()
```

```{r merge-dime-cces, eval = FALSE}
ideo_merge <- 
  bind_rows(ideo_all, ideo_party) %>%
  left_join(dime) %>%
  mutate(
    party_group = case_when(
      party == "All" ~ "All Respondents",
      party %in% c("Democrat", "Republican") ~ "Partisans"
    )
  ) %>%
  filter(cycle %% 2 == 0) %>%
  print()

# write_rds(
#   ideo_merge, 
#   here("present", "apw-2020", "easy-data", "ideo-vote.rds")
# )

```

```{r plot-ideo-mean, eval = FALSE}
ideo_merge %>%
  filter(is.na(party_group) == FALSE) %>%
  ggplot() +
  aes(x = district_pres_vs, y = mean_ideo, color = party) +
  geom_point(shape = 1) +
  geom_smooth(aes(group = party), color = "black") +
  facet_grid(party_group ~ cycle) +
  scale_color_manual(
    values = c("All" = "gray", "Democrat" = dblue, "Republican" = rred)
  ) +
  scale_y_continuous(
    breaks = 1:5, 
    labels = c("Very Liberal", "Liberal", "Moderate", 
               "Conservative", "Very Conservative"),
    limits = c(1, 5)
  )
```


This section shows the limitations of inferring voter preferences from vote shares, using notation similar to @kernell:2009:districts. 

Georgia Kernell -@kernell:2009:districts demonstrates the difficulty of inferring district-level preferences (median voter locations) from observed votes. First, she shows that the ordering of district medians cannot be inferred from the vote shares of one election. Suppose we wish to place districts $1$ and $2$ on an ideological dimension. We observe that the Republican share of the two party vote in each district is $p_{1}$ and $p_{2}$. Assuming that voter preferences are normally distributed around the median voter (equivalent to the mean voter), then vote shares can be understood as the result of the normal CDF by comparing the candidate's ideal point to the distribution of voter preferences.
\begin{align}
  p_{i} &= \Phi\left(\frac{c - \mu_{i}}{\sigma_{i}}\right)
\end{align}
By inverting the normal CDF, she shows that the difference in medians $\mu_{1}$ and $\mu_{2}$ is not proportional to vote shares in each district, but to the $z$-score of the vote in each district.
\begin{align}
  \mu_{2} - \mu_{1} &\propto Z\left(p_{2}\right) - Z\left(p_{1}\right),
\end{align}
The nonlinear relationship between $\mu_{i}$ and $p_{i}$ suggests that district preferences are unidentifiable without using multiple elections resulting from the same fixed set of voter preferences $\mu_{i}$.

Following a similar setup, I demonstrate that the task of inferring the positions of multiple parties is even more difficult. First, rather than assuming that voter preferences in a district are normally distributed with one mean and one dispersion term, we assume that voter preferences are mixture of two distributions (indexed $1$ and $2$). Each party votes for a Republican candidate akin to the normal CDF as before, but the vote share $p$ for the Republican reflects the size of each partisan constituency in the district as well. Suppose that the size and ideal point of party unaffiliated is represented by a normally distributed error term $\varepsilon$:
\begin{align}
  p &= \Phi\left(\frac{c - \mu_{1}}{\sigma_{1}}\right)\pi_{1} + \Phi\left(\frac{c - \mu_{2}}{\sigma_{2}}\right)\pi_{2} + \varepsilon,
\end{align}
where $p_{i}$ reflects the proportion of the electorate that identifies with party $i$. Isolating $\mu_{1}$ and $\mu_{2}$ in this setup is rather difficult, and the choice of simplifying assumptions is limited. We could assume that the variance of preferences in each party is equal, $\sigma_{1} = \sigma_{2} = \sigma$, and manipulate the equation somewhat...
\begin{align}
  Z\left(p\right)\sigma &= \left(c - \mu_{1}\right)\pi_{1} + \left(c - \mu_{2}\right)\pi_{2},
\end{align}
but the limitations are still significant. We could not make a simplifying assumption that $\pi_{1} = \pi_{2}$ for but a handful of districts. We might estimate $\pi_{i}$ from survey data
<!------- TO DO ---------
- but what
------------------------->


```{r create-two-parties}
f <- 
  tibble(
    x = seq(-10, 10, .01)
  ) %>%
  mutate(
    dmod = dnorm(x, mean = -0.15, sd = 0.25),
    rmod = dnorm(x, mean = 0.15, sd = 0.25),
    dex = dnorm(x, mean = -0.5, sd = 0.25),
    rex = dnorm(x, mean = 0.5, sd = 0.25)
  ) %>%
  gather(key = group, value = y, dmod, rmod, dex, rex) %>% 
  mutate(
    party = ifelse(group %in% c("dmod", "dex"), "Democrats", "Republicans"), 
    ex = ifelse(group %in% c("dmod", "rmod"), "Moderate Partisan Groups", "Polarized Partisan Groups")
  ) %>%
  print()


means <-  f %>%
  group_by(ex) %>% 
  summarize(xintercept = sum(y * x)) %>% 
  print
```


```{r plot-two-parties, include = TRUE, fig.height = 4, fig.width = 8, out.width = "100%", fig.cap = "Two districts with identically located median voters"}
ggplot(data = f) +
  aes(x = x, y = y, color = party, fill = party) +
  facet_wrap(~ ex, nrow = 1) +
  geom_ribbon(
    aes(ymin = 0, ymax = y), 
    color = NA,
    show.legend = FALSE,
    alpha = 0.6
  ) +
  scale_color_manual(values = party_colors) +
  scale_fill_manual(values = party_colors) +
  scale_y_continuous(breaks = NULL) +
  scale_x_continuous(
    breaks = c(-0.75, 0, 0.75),
    labels = c("Liberals", 
               "Moderates", 
               "Conservatives")
  ) +
  labs(
    title = "Aggregate votes mask underlying policy preferences",
    subtitle = "Two districts with the same median voter position",
    x = NULL,
    y = NULL, 
    fill = NULL
  ) +
  # geom_vline(data = means, aes(xintercept = xintercept)) +
  coord_cartesian(xlim = c(-1.25, 1.25)) +
  theme(
    panel.grid.major.x = element_blank(),
    axis.ticks = element_blank(),
    panel.background = element_blank(),
    panel.border = element_blank(),
    # strip.placement = "outside"
  )
```




## Outline for the dissertation


### Theoretical Orientation

Which games are we playing:

- "Spatial" Models of Policy Preferences
- Representatives as Delegates vs.\ Trustees
- terms I need to define


### Proposed Model

Value of directly modeling each party:

- identify the actual quantities of interest
- do parties "move together" or not? This is only possible to infer by modeling each party's hierarchy separately.



### Causal Inference in the Study of Representation

What is the problem?

- Ignorable assignment of aggregate ideology
- Ignorable assignment of candidate ideology

We actually don't have much of this here.

- Few examples.

What do I propose?

- Many observational studies using "selection on observables" assumptions.
- We may not be able to break out of this
- But we can improve on the (1) declaration of the causal query, (2) examination of which assumptions are required for which queries, and (3) be more cautious about what we can and can't say using the data and research designs that we have.
- Pragmatic orientation: Taboo against explicit causal inference, (Grosz, Rohrer, Thoemmes), Whatever the Hernán (2018) article says 
- The point of causal inference isn't to shame observational studies away from making causal claims. The point is to clarify which designs and assumptions enable certain causal claims and which do not.



### Machine Learning and Observational Causal Inference

"Double Robustness" ??




### Bayesian Causal Inference

Where do we have to confront things

- the treatment assignments themselves are imprecisely measured. We have a probability distribution of _observed_ treatment. 
- We view NHST with skepticism
- We aim to normalize a Bayesian interpretation of causal effects
    - there are many possible scenarios that could explain the data that we see
    - the posterior distribution represents the plausibility of scenarios, after seeing the data.



